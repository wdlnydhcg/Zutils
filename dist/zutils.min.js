!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).zutils={})}(this,function(e){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(n,!0).forEach(function(e){l(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){animationTimer=setTimeout(e,1e3/60)};var t={throttle:function(n,r,i){function o(e,t){n.apply(e,t)}var a=0,u=null;return function(){var e=Date.now();a||!1!==i||(a=e);var t=r-(e-a);u&&clearTimeout(u),0<t?u=setTimeout(o,t,this,arguments):(a=e,o(this,arguments))}},debounce:function(n,e,t){function r(e,t){n.apply(e,t)}var i=null;return function(){t&&!i&&r(this,arguments),i&&clearTimeout(i),i=setTimeout(r,e,this,arguments)}},syncPromise:function(e,t){return e.then(function(e){return[null,e]}).catch(function(e){return t&&Object.assign(e,t),[e,void 0]})},animationFrame:animationFrame,delay:function(t){return new Promise(function(e){setTimeout(e,t)})},compose:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=n.length-1;return function(){for(var e=r,t=n[r].apply(this,n);e--;)t=n[e].call(this,t);return t}}};function a(t){return function(e){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")}}function u(t){return function(e){return t.test(e)}}function c(e){var t=n(e);return"function"===t||"object"===t&&!!obj}function s(e){return Array.isArray?Array.isArray(e):a("Array")(e)}var d=a("Arguments"),h=a("Null"),g=a("Number"),m=a("String"),v=a("Function"),y=a("Promise"),p=a("Date"),b=a("RegExp"),w=a("Map"),O=a("Set"),S=a("Symbol"),k=a("Error"),j=a("Undefined");function A(e){return c(HTMLElement)?e instanceof HTMLElement:c(e)&&m(e.nodeName)&&1===e.nodeType}var T=u(/link/),E=u(/email/),M=u(/tel/),P=u(/idcard/),D=u(/qq/),z=u(/wechat/),x=u(/html/),C=u(/img/),_={isType:a,isRule:u,isObject:c,isEmptyObject:function(e){return c(e)&&"{}"==JSON.stringify(e)},isEmpty:function(e){return h(e)||j(e)},isArray:s,isNumber:g,isString:m,isNull:h,isUndefined:j,isNaN:function e(t){return g(t)&&e(t)},isArguments:d,isSet:O,isMap:w,isSymbol:S,isPromise:y,isError:k,isDate:p,isRegExp:b,isElement:A,isLink:T,isEMail:E,isTel:M,isWechat:z,isQQ:D,isIdCard:P,isHtmlString:x,isImgTagString:C};function H(e,t){var r=i(e);return function(t){var n=[];return Object.keys(t).forEach(function(e){t[e]&&n.push(RegExp("".concat(e,"\\s*=\\s*(['\"])").concat(t[e],"\\1"),"gim"))}),n}(t).forEach(function(t){var n=[];r.forEach(function(e){t.test(e)&&n.push(e)}),r=n}),r}function Y(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.source,n=e.tag,r=e.attrs,i=void 0===r?{}:r;if(!t)return console.warn("请添加source字段"),[];if(!n)return console.warn("请添加tag字段"),[];var o="br,hr,img,input,param,meta,link".split(","),a=RegExp("<".concat(n,"[^<>]*>[\\d\\D]*</").concat(n,">"),"gmi");o.includes(n)&&(a=RegExp("<".concat(n,"[^<>]*/?>"),"gmi"));var u=t.match(a);return u&&u.length&&i&&Object.keys(i).length&&(u=H(u,i)),u||[]}var R={camelize:function(e){return e.replace(/[-_]+(.)?/g,function(e,t){return t?t.toUpperCase():""})},dasherize:function(e){return e.replace(/([A-Z])/g,"-$1"),replace(/_+/g,"-").toLowerCase()},getTagfromHtmlString:Y,getAttrFromHtmlString:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.source,n=e.tag,r=e.attr,i=e.attrs;return t?n?r?Y({source:t,tag:n,attrs:void 0===i?{}:i}).map(function(e){var t=RegExp("".concat(r,"\\s*=\\s*(['\"])([^\\1]+?)\\1"),"gmi").exec(e);return t&&1<t.length?t[2]:""}):(console.warn("请添加attr字段"),[]):(console.warn("请添加tag字段"),[]):(console.warn("请添加source字段"),[])},getPureTextFromHtmlString:function(e){return e.replace(/<style[^>]*>[\d\D]*<\/style>|<[^>]*>/g,"")}},F=document.documentElement||document.body;function I(e){if(e instanceof Window)return F;if(A(e))return e;if(m(e)){var t=document.querySelector(e);return A(t)?t:null}return console.warn("当前元素不存在"),null}function L(e,t){var n=I(t),r=I(e);if(n&&r)return r.contains(n)}function N(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:F,n=I(e),r=I(t);if(n&&r){if(L(r,n)){var i=!1;"staic"===function(e,t){var n=I(e);if(n)return n.currentStyle?n.currentStyle[t]:getComputedStyle(n)[t]}(r,"position")&&(r.style.position="relative",i=!0);for(var o=e.offsetTop,a=e.offsetParent;a&&a!==r&&r.contains(a);)~navigator.userAgent.indexOf("MSIE 8.0")||(o+=a.clientTop),o+=a.offsetTop,a=a.offsetParent;return i&&(r.style.position="static"),o}console.warning("目标元素属于提供元素的子元素")}}function U(){var t=1<arguments.length?arguments[1]:void 0,n=arguments.length<=2||void 0===arguments[2]||arguments[2],r=I(0<arguments.length&&void 0!==arguments[0]?arguments[0]:F);if(r){var i=0<t-r.scrollTop?20:-20;!function e(){n&&0<i*(t-r.scrollTop)?(r.scrollTop+=i,o(e)):r.scrollTop=t}()}}var q={getElement:I,getElementOffsetTop:N,elementContains:L,scrollTo:U,scrollToTop:function(){var e=arguments.length<=1||void 0===arguments[1]||arguments[1],t=I(0<arguments.length&&void 0!==arguments[0]?arguments[0]:F);t&&U(t,0,e)},scrollToBottom:function(){var e=arguments.length<=1||void 0===arguments[1]||arguments[1],t=I(0<arguments.length&&void 0!==arguments[0]?arguments[0]:F);t&&U(t,t.scrollHeight,e)},scrollToTarget:function(){var e=1<arguments.length?arguments[1]:void 0,t=arguments.length<=2||void 0===arguments[2]||arguments[2],n=I(0<arguments.length&&void 0!==arguments[0]?arguments[0]:F),r=I(e);if(n&&r){var i=N(r,n);null===i?console.warning("目标元素属于提供元素的子元素"):U(n,i,t)}},addClass:function(e,t){if(I(e))if(m(t))if(e.classList)e.classList.add(t);else{var n=t.match(/\b\w+\b/g);n.push(t),e.className=n.join(" ")}else console.warning("类名必须为字符串")},removeClass:function(e,t){if(I(e))if(m(t))if(e.classList)e.classList.remove(t);else{var n=t.match(/\b\w+\b/g);n=n.filter(function(e){return e!==t}),e.className=n.join(" ")}else console.warning("类名必须为字符串")},loadJs:function(n){return new Promise(function(e){var t=document.createElement("script");t.type="text/javascript",t.readyState?t.onreadystatechange=function(){"loaded"!==t.readyState&&"complete"!==t.readyState||(t.onreadystatechange=null,e())}:t.onload=function(){e()},t.src=n,document.body.appendChild(t)})}};function B(i){return function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return Object.keys(n).reduce(function(e,t){return("keep"===i?r.includes(t):!r.includes(t))&&(e[t]=n[t]),e},{})}}var J={clone:function(e){},deepClone:function(e){},extend:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign.apply(Object,[e].concat(n))},keepKeys:B("keep"),removeKeys:B("remove"),replaceKeys:function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=Object.keys(r);return Object.keys(n).reduce(function(e,t){return e[i.includes(t)?r[t]:t]=n[t],e},{})}};function Q(e){var n=0<arguments.length&&void 0!==e?e:"left";return function(e,t){("left"===n?e:i(e).reverse()).forEach(t)}}function K(e){return"length"in e}function V(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return e.reduce(function(e,t){return(1<n||0===n)&&s(t)?[].concat(i(e),i(V(t,1<n?n-1:0))):[].concat(i(e),[t])},[])}function W(e){return i(Set(e))}function $(e,t){var n=new Set(e);return t.filter(function(e){return n.has(e)})}function X(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return W(V(t,2))}function Z(e,t){var n=X(e,t),r=$(e,t);return n.filter(function(e){return!r.includes(e)})}function G(e){for(var t=i(e),n=t.length;n;)var r=Math.floor(Math.random()*n--)[t[r]]=[t[r],t[n]];return t}var ee={isArrayLike:K,flatten:V,intersection:$,intersectionAll:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return $(t,e)})},union:X,difference:Z,differenceAll:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return Z(t,e)})},array2Tree:function t(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=e.id,o=void 0===i?"id":i,a=e.pid,u=void 0===a?"pid":a,c=e.children,s=void 0===c?"children":c;return n.filter(function(e){return e[u]===r}).map(function(e){return f({},e,l({},s,t(n,e[o],{id:o,pid:u,children:s})))})},array2Object:function(e,r){return e.length?e.reduce(function(e,t,n){return e[r&&t[r]?t[r]:n]=t,e},{}):(console.warning("传入数组为空"),null)},arrayLike2Array:function(e){return K(e)?Array.from(e):(console.warning("当前传入数据不是类数组"),[])},unique:W,forEach:Q(),forEachRight:Q("right"),chunk:function(n,r){return Array.from({length:Math.ceil(n.length/r)},function(e,t){return n.slice(r*t,r*(t+1))})},countBy:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e){return e};return e.map(function(e){return v(t)?t(e):e}).reduce(function(e,t){return e[t]=e[t]?++e[t]:1,e},{})},countByValue:function(e,t){return countSameBy(e)[t]},indexOfAll:function(e,r){return e.reduce(function(e,t,n){return t===r?[].concat(i(e),[n]):e},[])},shuffe:G,sample:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return G(e).slice(0,t)}};function te(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:location.href,t=e.substring(1+e.lastIndexOf("?")),o={};return t.replace(/([^?&=]+)=([^?&=]*)/g,function(e,t,n){var r=decodeURIComponent(t),i=decodeURIComponent(n);return o[r]=i+="",e}),o}function ne(e){return e.test(navigator.userAgent)}var re={getParam2Json:te,getJson2Param:function(t){return t?Object.keys(t).map(function(e){return void 0===t[e]?"":"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))}).join("&"):""},getUrlParam:function(e){var t=te(1<arguments.length&&void 0!==arguments[1]?arguments[1]:location.href);if(Array.isArray(e)){var n={};return e.forEach(function(e){n[e]=t[e]}),n}if("string"==typeof e)return t[e]}},ie=ne(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i),oe=!ie(),ae={isMobile:ie,isPc:oe,isIPhone:ne(/\(i[^;]+;( U;)? CPU.+Mac OS X/gi),isIPad:ne(/iPad/gi),isAndroid:ne(/android|adr/gi),isChrome:ne(/Chrome/i),isFirefox:ne(/Firefox/i),isSafari:ne(/Safari/i),isMicroMessenger:ne(/MicroMessenger/i),isQQBrowser:ne(/qq/gi),isWeibo:ne(/weibo/gi),isDevice:function(e){return ne(e)}};function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(t){return function(e){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")}}function se(e){return ke[e]||e.toLowerCase()}function le(e){return e?new Date(e):new Date}function fe(e,t,n){return e<100&&0<=e?new Date(e+400,t,n)-126227808e5:new Date(e,t,n).valueOf()}function de(e){if(e instanceof je)return e;var t={};return e&&(t.date=e),new je(t)}var he,ge,me=ce("Date"),ve=ce("String"),ye=ce("Undefined"),pe=ce("Number"),be=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,we=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|SS{1,2}/g,Oe={year:"setFullYear",month:"setMonth",date:"setDate",hour:"setHours",minute:"setMinutes",second:"setSeconds",millisecond:"setMilliseconds"},Se=(he="日一二三四五六".split("")).length?he.reduce(function(e,t,n){return e[ge&&t[ge]?t[ge]:n]=t,e},{}):(console.warning("传入数组为空"),null),ke={y:"year",M:"month",D:"day",H:"hour",m:"minute",s:"second",ms:"millisecond"},je=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._date=this.parse(e.date)}return function(e,t,n){t&&ue(e.prototype,t),n&&ue(e,n)}(t,[{key:"parse",value:function(e){if(ye(e))return le();if(me(e)||pe(e))return le(e);if(ve(e)&&be.test(e)){var t=e.match(be);if(t)return new Date(t[1],t[2]-1,t[3]||1,t[4]||0,t[5]||0,t[6]||0,t[7]||0)}return le()}},{key:"format",value:function(e){function t(e,t){return 0<t?(e+"").padStart(t,"0"):e+""}var n=0<arguments.length&&void 0!==e?e:"YYYY-MM-DD HH:mm:ss",r=this.year,i=this.month,o=this.date,a=this.hour,u=this.minute,c=this.second,s=this.millisecond,l=this.week,f={YY:t(r).slice(-2),YYYY:t(r),M:t(i+1),MM:t(i+1,2),D:t(o),DD:t(o,2),d:l,dd:Se[l],H:t(a),HH:t(a,2),h:t(a%12),hh:t(a%12,2),m:t(u),mm:t(u,2),s:t(c),ss:t(c,2),S:t(s),SS:t(s,2)};return n.replace(we,function(e){return f[e]||e})}},{key:"startEnd",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:"start";if(!e||!this.isValid()||"millisecond"===e)return this;function r(e){return"end"===n?o.valueOf()+e-o.valueOf()%e-1:Math.floor(o.valueOf()/e)}var i,o=this._date,a=this.year,u=this.month,c=this.date,s=se(e),l="end"===n?1:0,f="end"===n?-1:0;switch(s){case"year":i=fe(a+l,0,1)+f;break;case"month":i=fe(a,u+l,1)+f;break;case"day":i=fe(a,u,c+l)+f;break;case"hour":i=r(36e5);break;case"minute":i=r(6e4);break;case"second":i=r(1e3)}return this._date.setTime(i),this}},{key:"startOf",value:function(e){return this.startEnd(e,"start")}},{key:"endOf",value:function(e){return this.startEnd(e,"end")}},{key:"addSubtract",value:function(e,t,n){var r=se(t);this._date[Oe[r]](this[r]+(0<n?e:-e))}},{key:"add",value:function(e,t){return this.addSubtract(e,1<arguments.length&&void 0!==t?t:"s",1),this}},{key:"subtract",value:function(e,t){return this.addSubtract(e,1<arguments.length&&void 0!==t?t:"s",-1),this}},{key:"getTime",value:function(e){return le(this.parse(e)).getTime()}},{key:"isLeapYear",value:function(e){var t=this.parse(e).getFullYear();return t%4==0&&t%100!=0||t%400==0}},{key:"isBefore",value:function(e,t){return this.endOf(1<arguments.length&&void 0!==t?t:"s")>this.parse(e)}},{key:"isAfter",value:function(e,t){return this.startOf(1<arguments.length&&void 0!==t?t:"s")>this.parse(e)}},{key:"isSame",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:"s";return this.startOf(n)===de(e).startOf(n)}},{key:"isBetween",value:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:"s",i=this.startOf(r),o=this.endOf(r),a=this.parse(e),u=this.parse(t);return a<=i&&o<=u||u<=i&&o<=a}},{key:"isValid",value:function(){return!(""+this._date=="Invalid Date")}},{key:"valueOf",value:function(){return this.getTime()}},{key:"year",get:function(){return this._date.getFullYear()}},{key:"month",get:function(){return this._date.getMonth()}},{key:"date",get:function(){return this._date.getDate()}},{key:"hour",get:function(){return this._date.getHours()}},{key:"minute",get:function(){return this._date.getMinutes()}},{key:"second",get:function(){return this._date.getSeconds()}},{key:"millisecond",get:function(){return this._date.getMilliseconds()}},{key:"week",get:function(){return this._date.getDay()}}]),t}(),Ae=f({},zutil,{},ztype,{},zstring,{},zhtml,{},zarray,{},zobject,{},zurl,{},zplatform,{},zstore,{zdate:zdate});e.default=Ae,e.zarray=ee,e.zdate=de,e.zhtml=q,e.zobject=J,e.zplatform=ae,e.zstore={},e.zstring=R,e.ztype=_,e.zurl=re,e.zutil=t,Object.defineProperty(e,"__esModule",{value:!0})});
