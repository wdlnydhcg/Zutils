!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).zutils={})}(this,function(e){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(n,!0).forEach(function(e){f(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(e){throw Error('"'+e+'" is read-only')}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){animationTimer=setTimeout(e,1e3/60)},c=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(){clearTimeout(animationTimer)};var t={throttle:function(n,r,i){function o(e,t){n.apply(e,t)}var a=0,s=null;return function(){var e=Date.now();a||!1!==i||(a=e);var t=r-(e-a);s&&clearTimeout(s),0<t?s=setTimeout(o,t,this,arguments):(a=e,o(this,arguments))}},debounce:function(n,e,t){function r(e,t){n.apply(e,t)}var i=null;return function(){t&&!i&&r(this,arguments),i&&clearTimeout(i),i=setTimeout(r,e,this,arguments)}},syncPromise:function(e,t){return e.then(function(e){return[null,e]}).catch(function(e){return t&&Object.assign(e,t),[e,void 0]})},animationFrame:animationFrame,delay:function(t){return new Promise(function(e){setTimeout(e,t)})},compose:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=n.length-1;return function(){for(var e=r,t=n[r].apply(this,n);e--;)t=n[e].call(this,t);return t}}};function u(t){return function(e){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")}}function h(t){return function(e){return t.test(e)}}function d(e){var t=n(e);return"function"===t||"object"===t&&!!obj}function v(e){return Array.isArray?Array.isArray(e):u("Array")(e)}var p=u("Arguments"),m=u("Null"),y=u("Number"),g=u("String"),b=u("Function"),_=u("Promise"),w=u("Date"),O=u("RegExp"),E=u("Map"),k=u("Set"),A=u("Symbol"),S=u("Error"),M=u("Undefined");function T(e){return d(HTMLElement)?e instanceof HTMLElement:d(e)&&g(e.nodeName)&&1===e.nodeType}var z=h(/link/),j=h(/email/),D=h(/tel/),L=h(/idcard/),P=h(/qq/),x=h(/wechat/),R=h(/html/),C=h(/img/),F={isType:u,isRule:h,isObject:d,isEmptyObject:function(e){return d(e)&&"{}"==JSON.stringify(e)},isEmpty:function(e){return m(e)||M(e)},isArray:v,isNumber:y,isString:g,isNull:m,isUndefined:M,isNaN:function e(t){return y(t)&&e(t)},isArguments:p,isSet:k,isMap:E,isSymbol:A,isPromise:_,isError:S,isDate:w,isRegExp:O,isElement:T,isLink:z,isEMail:j,isTel:D,isWechat:x,isQQ:P,isIdCard:L,isHtmlString:R,isImgTagString:C};function H(e,t){var r=a(e);return function(t){var n=[];return Object.keys(t).forEach(function(e){t[e]&&n.push(RegExp("".concat(e,"\\s*=\\s*(['\"])").concat(t[e],"\\1"),"gim"))}),n}(t).forEach(function(t){var n=[];r.forEach(function(e){t.test(e)&&n.push(e)}),r=n}),r}function I(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.source,n=e.tag,r=e.attrs,i=void 0===r?{}:r;if(!t)return console.warn("请添加source字段"),[];if(!n)return console.warn("请添加tag字段"),[];var o="br,hr,img,input,param,meta,link".split(","),a=RegExp("<".concat(n,"[^<>]*>[\\d\\D]*</").concat(n,">"),"gmi");o.includes(n)&&(a=RegExp("<".concat(n,"[^<>]*/?>"),"gmi"));var s=t.match(a);return s&&s.length&&i&&Object.keys(i).length&&(s=H(s,i)),s||[]}var Y={camelize:function(e){return e.replace(/[-_]+(.)?/g,function(e,t){return t?t.toUpperCase():""})},dasherize:function(e){return e.replace(/([A-Z])/g,"-$1"),replace(/_+/g,"-").toLowerCase()},getTagfromHtmlString:I,getAttrFromHtmlString:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.source,n=e.tag,r=e.attr,i=e.attrs;return t?n?r?I({source:t,tag:n,attrs:void 0===i?{}:i}).map(function(e){var t=RegExp("".concat(r,"\\s*=\\s*(['\"])([^\\1]+?)\\1"),"gmi").exec(e);return t&&1<t.length?t[2]:""}):(console.warn("请添加attr字段"),[]):(console.warn("请添加tag字段"),[]):(console.warn("请添加source字段"),[])},getPureTextFromHtmlString:function(e){return e.replace(/<style[^>]*>[\d\D]*<\/style>|<[^>]*>/g,"")}},q=document.documentElement||document.body;function B(e){if(e instanceof Window)return arguments.length<=1||void 0===arguments[1]||arguments[1]?q:window;if(T(e))return e;if(g(e)){var t=document.querySelector(e);return T(t)?t:null}return console.warn("当前元素不存在"),null}function N(e,t){var n=B(t),r=B(e);if(n&&r)return r.contains(n)}function U(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:q,n=B(e),r=B(t);if(n&&r){if(N(r,n)){var i=!1;"staic"===function(e,t){var n=B(e);if(n)return n.currentStyle?n.currentStyle[t]:getComputedStyle(n)[t]}(r,"position")&&(r.style.position="relative",i=!0);for(var o=e.offsetTop,a=e.offsetParent;a&&a!==r&&r.contains(a);)~navigator.userAgent.indexOf("MSIE 8.0")||(o+=a.clientTop),o+=a.offsetTop,a=a.offsetParent;return i&&(r.style.position="static"),o}console.warn("目标元素属于提供元素的子元素")}}function W(){var t=1<arguments.length?arguments[1]:void 0,n=arguments.length<=2||void 0===arguments[2]||arguments[2],r=B(0<arguments.length&&void 0!==arguments[0]?arguments[0]:q);if(r){var i=0<t-r.scrollTop?20:-20,o=null;!function e(){n&&0<i*(t-r.scrollTop)?0<i*(t-r.scrollTop)?(r.scrollTop+=i,o=s(e)):c(o):r.scrollTop=t}()}}var V={addResizeListener:addResizeListener,removeResizeListener:removeResizeListener,getElement:B,getElementOffsetTop:U,elementContains:N,scrollTo:W,scrollToTop:function(){var e=arguments.length<=1||void 0===arguments[1]||arguments[1],t=B(0<arguments.length&&void 0!==arguments[0]?arguments[0]:q);t&&W(t,0,e)},scrollToBottom:function(){var e=arguments.length<=1||void 0===arguments[1]||arguments[1],t=B(0<arguments.length&&void 0!==arguments[0]?arguments[0]:q);t&&W(t,t.scrollHeight,e)},scrollToTarget:function(){var e=1<arguments.length?arguments[1]:void 0,t=arguments.length<=2||void 0===arguments[2]||arguments[2],n=B(0<arguments.length&&void 0!==arguments[0]?arguments[0]:q),r=B(e);if(n&&r){var i=U(r,n);null===i?console.warn("目标元素属于提供元素的子元素"):W(n,i,t)}},addClass:function(e,t){if(B(e))if(g(t))if(e.classList)e.classList.add(t);else{var n=t.match(/\b\w+\b/g);n.push(t),e.className=n.join(" ")}else console.warn("类名必须为字符串")},removeClass:function(e,t){if(B(e))if(g(t))if(e.classList)e.classList.remove(t);else{var n=t.match(/\b\w+\b/g);n=n.filter(function(e){return e!==t}),e.className=n.join(" ")}else console.warn("类名必须为字符串")},loadJs:function(n){return new Promise(function(e){var t=document.createElement("script");t.type="text/javascript",t.readyState?t.onreadystatechange=function(){"loaded"!==t.readyState&&"complete"!==t.readyState||(t.onreadystatechange=null,e())}:t.onload=function(){e()},t.src=n,document.body.appendChild(t)})}};function G(i){return function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return Object.keys(n).reduce(function(e,t){return("keep"===i?r.includes(t):!r.includes(t))&&(e[t]=n[t]),e},{})}}var J={clone:function(e){},deepClone:function(e){},extend:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign.apply(Object,[e].concat(n))},keepKeys:G("keep"),removeKeys:G("remove"),replaceKeys:function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=Object.keys(r);return Object.keys(n).reduce(function(e,t){return e[i.includes(t)?r[t]:t]=n[t],e},{})}};function Q(e){var n=0<arguments.length&&void 0!==e?e:"left";return function(e,t){("left"===n?e:a(e).reverse()).forEach(t)}}function K(e){return"length"in e}function $(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return e.reduce(function(e,t){return(1<n||0===n)&&v(t)?[].concat(a(e),a($(t,1<n?n-1:0))):[].concat(a(e),[t])},[])}function X(e){return a(Set(e))}function Z(e,t){var n=new Set(e);return t.filter(function(e){return n.has(e)})}function ee(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return X($(t,2))}function te(e,t){var n=ee(e,t),r=Z(e,t);return n.filter(function(e){return!r.includes(e)})}function ne(e){for(var t=a(e),n=t.length;n;)var r=Math.floor(Math.random()*n--)[t[r]]=[t[r],t[n]];return t}var re={isArrayLike:K,flatten:$,intersection:Z,intersectionAll:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return Z(t,e)})},union:ee,difference:te,differenceAll:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return te(t,e)})},array2Tree:function t(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=e.id,o=void 0===i?"id":i,a=e.pid,s=void 0===a?"pid":a,c=e.children,u=void 0===c?"children":c;return n.filter(function(e){return e[s]===r}).map(function(e){return l({},e,f({},u,t(n,e[o],{id:o,pid:s,children:u})))})},array2Object:function(e,r){return e.length?e.reduce(function(e,t,n){return e[r&&t[r]?t[r]:n]=t,e},{}):(console.warn("传入数组为空"),null)},arrayLike2Array:function(e){return K(e)?Array.from(e):(console.warn("当前传入数据不是类数组"),[])},unique:X,forEach:Q(),forEachRight:Q("right"),chunk:function(n,r){return Array.from({length:Math.ceil(n.length/r)},function(e,t){return n.slice(r*t,r*(t+1))})},countBy:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e){return e};return e.map(function(e){return b(t)?t(e):e}).reduce(function(e,t){return e[t]=e[t]?++e[t]:1,e},{})},countByValue:function(e,t){return countSameBy(e)[t]},indexOfAll:function(e,r){return e.reduce(function(e,t,n){return t===r?[].concat(a(e),[n]):e},[])},shuffe:ne,sample:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return ne(e).slice(0,t)}};function ie(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:location.href,t=e.substring(1+e.lastIndexOf("?")),o={};return t.replace(/([^?&=]+)=([^?&=]*)/g,function(e,t,n){var r=decodeURIComponent(t),i=decodeURIComponent(n);return o[r]=i+="",e}),o}function oe(e){return e.test(navigator.userAgent)}var ae={getParam2Json:ie,getJson2Param:function(t){return t?Object.keys(t).map(function(e){return void 0===t[e]?"":"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))}).join("&"):""},getUrlParam:function(e){var t=ie(1<arguments.length&&void 0!==arguments[1]?arguments[1]:location.href);if(Array.isArray(e)){var n={};return e.forEach(function(e){n[e]=t[e]}),n}if("string"==typeof e)return t[e]}},se=oe(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i),ce=!se(),ue={isMobile:se,isPc:ce,isIPhone:oe(/\(i[^;]+;( U;)? CPU.+Mac OS X/gi),isIPad:oe(/iPad/gi),isAndroid:oe(/android|adr/gi),isChrome:oe(/Chrome/i),isFirefox:oe(/Firefox/i),isSafari:oe(/Safari/i),isMicroMessenger:oe(/MicroMessenger/i),isQQBrowser:oe(/qq/gi),isWeibo:oe(/weibo/gi),isDevice:function(e){return oe(e)}};function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(t){return function(e){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")}}function he(e){return Se[e]||e.toLowerCase()}function de(e){return e?new Date(e):new Date}function ve(e,t,n){return e<100&&0<=e?new Date(e+400,t,n)-126227808e5:new Date(e,t,n).valueOf()}function pe(e){if(e instanceof Me)return e;var t={};return e&&(t.date=e),new Me(t)}var me,ye,ge=le("Date"),be=le("String"),_e=le("Undefined"),we=le("Number"),Oe=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,Ee=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|SS{1,2}/g,ke={year:"setFullYear",month:"setMonth",date:"setDate",hour:"setHours",minute:"setMinutes",second:"setSeconds",millisecond:"setMilliseconds"},Ae=(me="日一二三四五六".split("")).length?me.reduce(function(e,t,n){return e[ye&&t[ye]?t[ye]:n]=t,e},{}):(console.warning("传入数组为空"),null),Se={y:"year",M:"month",D:"day",H:"hour",m:"minute",s:"second",ms:"millisecond"},Me=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._date=this.parse(e.date)}return function(e,t,n){t&&fe(e.prototype,t),n&&fe(e,n)}(t,[{key:"parse",value:function(e){if(_e(e))return de();if(ge(e)||we(e))return de(e);if(be(e)&&Oe.test(e)){var t=e.match(Oe);if(t)return new Date(t[1],t[2]-1,t[3]||1,t[4]||0,t[5]||0,t[6]||0,t[7]||0)}return de()}},{key:"format",value:function(e){function t(e,t){return 0<t?(e+"").padStart(t,"0"):e+""}var n=0<arguments.length&&void 0!==e?e:"YYYY-MM-DD HH:mm:ss",r=this.year,i=this.month,o=this.date,a=this.hour,s=this.minute,c=this.second,u=this.millisecond,f=this.week,l={YY:t(r).slice(-2),YYYY:t(r),M:t(i+1),MM:t(i+1,2),D:t(o),DD:t(o,2),d:f,dd:Ae[f],H:t(a),HH:t(a,2),h:t(a%12),hh:t(a%12,2),m:t(s),mm:t(s,2),s:t(c),ss:t(c,2),S:t(u),SS:t(u,2)};return n.replace(Ee,function(e){return l[e]||e})}},{key:"startEnd",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:"start";if(!e||!this.isValid()||"millisecond"===e)return this;function r(e){return"end"===n?o.valueOf()+e-o.valueOf()%e-1:Math.floor(o.valueOf()/e)}var i,o=this._date,a=this.year,s=this.month,c=this.date,u=he(e),f="end"===n?1:0,l="end"===n?-1:0;switch(u){case"year":i=ve(a+f,0,1)+l;break;case"month":i=ve(a,s+f,1)+l;break;case"day":i=ve(a,s,c+f)+l;break;case"hour":i=r(36e5);break;case"minute":i=r(6e4);break;case"second":i=r(1e3)}return this._date.setTime(i),this}},{key:"startOf",value:function(e){return this.startEnd(e,"start")}},{key:"endOf",value:function(e){return this.startEnd(e,"end")}},{key:"addSubtract",value:function(e,t,n){var r=he(t);this._date[ke[r]](this[r]+(0<n?e:-e))}},{key:"add",value:function(e,t){return this.addSubtract(e,1<arguments.length&&void 0!==t?t:"s",1),this}},{key:"subtract",value:function(e,t){return this.addSubtract(e,1<arguments.length&&void 0!==t?t:"s",-1),this}},{key:"getTime",value:function(e){return de(this.parse(e)).getTime()}},{key:"isLeapYear",value:function(e){var t=this.parse(e).getFullYear();return t%4==0&&t%100!=0||t%400==0}},{key:"isBefore",value:function(e,t){return this.endOf(1<arguments.length&&void 0!==t?t:"s")>this.parse(e)}},{key:"isAfter",value:function(e,t){return this.startOf(1<arguments.length&&void 0!==t?t:"s")>this.parse(e)}},{key:"isSame",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:"s";return this.startOf(n)===pe(e).startOf(n)}},{key:"isBetween",value:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:"s",i=this.startOf(r),o=this.endOf(r),a=this.parse(e),s=this.parse(t);return a<=i&&o<=s||s<=i&&o<=a}},{key:"isValid",value:function(){return!(""+this._date=="Invalid Date")}},{key:"valueOf",value:function(){return this.getTime()}},{key:"year",get:function(){return this._date.getFullYear()}},{key:"month",get:function(){return this._date.getMonth()}},{key:"date",get:function(){return this._date.getDate()}},{key:"hour",get:function(){return this._date.getHours()}},{key:"minute",get:function(){return this._date.getMinutes()}},{key:"second",get:function(){return this._date.getSeconds()}},{key:"millisecond",get:function(){return this._date.getMilliseconds()}},{key:"week",get:function(){return this._date.getDay()}}]),t}(),Te=function(){if("undefined"!=typeof Map)return Map;function r(e,n){var r=-1;return e.some(function(e,t){return e[0]===n&&(r=t,!0)}),r}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=r(this.__entries__,e),n=this.__entries__[t];return n&&n[1]},e.prototype.set=function(e,t){var n=r(this.__entries__,e);~n?this.__entries__[n][1]=t:this.__entries__.push([e,t])},e.prototype.delete=function(e){var t=this.__entries__,n=r(t,e);~n&&t.splice(n,1)},e.prototype.has=function(e){return!!~r(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},e;function e(){this.__entries__=[]}}(),ze="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,je="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),De="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(je):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},Le=2;var Pe=["top","right","bottom","left","width","height","size","weight"],xe="undefined"!=typeof MutationObserver,Re=(Ce.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},Ce.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},Ce.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},Ce.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),0<e.length},Ce.prototype.connect_=function(){ze&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),xe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},Ce.prototype.disconnect_=function(){ze&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},Ce.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;Pe.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},Ce.getInstance=function(){return this.instance_||(this.instance_=new Ce),this.instance_},Ce.instance_=null,Ce);function Ce(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&s()}function a(){De(o)}function s(){var e=Date.now();if(n){if(e-i<Le)return;r=!0}else r=!(n=!0),setTimeout(a,t);i=e}return s}(this.refresh.bind(this),20)}var Fe=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},He=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||je},Ie=We(0,0,0,0);function Ye(e){return parseFloat(e)||0}function qe(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(e,t){return e+Ye(n["border-"+t+"-width"])},0)}function Be(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return Ie;var r=He(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n];t[i]=Ye(e["padding-"+i])}return t}(r),o=i.left+i.right,a=i.top+i.bottom,s=Ye(r.width),c=Ye(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=qe(r,"left","right")+o),Math.round(c+a)!==n&&(c-=qe(r,"top","bottom")+a)),!function(e){return e===He(e).document.documentElement}(e)){var u=Math.round(s+o)-t,f=Math.round(c+a)-n;1!=Math.abs(u)&&(s-=u),1!=Math.abs(f)&&(c-=f)}return We(i.left,i.top,s,c)}var Ne="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof He(e).SVGGraphicsElement}:function(e){return e instanceof He(e).SVGElement&&"function"==typeof e.getBBox};function Ue(e){return ze?Ne(e)?function(e){var t=e.getBBox();return We(0,0,t.width,t.height)}(e):Be(e):Ie}function We(e,t,n,r){return{x:e,y:t,width:n,height:r}}var Ve=(Ge.prototype.isActive=function(){var e=Ue(this.target);return(this.contentRect_=e).width!==this.broadcastWidth||e.height!==this.broadcastHeight},Ge.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},Ge);function Ge(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=We(0,0,0,0),this.target=e}var Je=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return Fe(a,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),a}(t);Fe(this,{target:e,contentRect:n})},Qe=(Ke.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof He(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Ve(e)),this.controller_.addObserver(this),this.controller_.refresh())}},Ke.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof He(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},Ke.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},Ke.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},Ke.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new Je(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},Ke.prototype.clearActive=function(){this.activeObservations_.splice(0)},Ke.prototype.hasActive=function(){return 0<this.activeObservations_.length},Ke);function Ke(e,t,n){if(this.activeObservations_=[],this.observations_=new Te,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}var $e="undefined"!=typeof WeakMap?new WeakMap:new Te,Xe=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Re.getInstance(),r=new Qe(t,n,this);$e.set(this,r)};["observe","unobserve","disconnect"].forEach(function(t){Xe.prototype[t]=function(){var e;return(e=$e.get(this))[t].apply(e,arguments)}});var Ze=void 0!==je.ResizeObserver?je.ResizeObserver:Xe;new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.list={}}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"on",value:function(e,t){this.list[e]||(this.list[e]=[]),this.list[e].push(t)}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=this.list[e];o&&o.length&&o.forEach(function(e){e.call.apply(e,[t].concat(r))})}},{key:"remove",value:function(e,t){var n=this.list[e];n&&n.length&&(n=t?(o("fns"),n.filter(function(e){return e!==t})):(o("fns"),[]))}}]),e}());function et(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value.target.__resizeListeners__||[];a.length&&a.forEach(function(e){e()})}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}var tt={addResizeListener:function(e,t){var n=B(e,!1);n&&(n.__resizeListeners__||(n.__resizeListeners__=[],n.__ro__=new Ze(et),n.__ro__.observe(n)),n.__resizeListeners__.push(t))},removeResizeListener:function(e,t){var n=B(e,!1);n&&n&&n.__resizeListeners__&&(n.__resizeListeners__.splice(n.__resizeListeners__.indexOf(t),1),n.__resizeListeners__.length||n.__ro__.disconnect())},observer:observer},nt=l({},zutil,{},ztype,{},zstring,{},zhtml,{},zarray,{},zobject,{},zurl,{},zplatform,{},zstore,{},zevent,{zdate:zdate});e.default=nt,e.zarray=re,e.zdate=pe,e.zevent=tt,e.zhtml=V,e.zobject=J,e.zplatform=ue,e.zstore={},e.zstring=Y,e.ztype=F,e.zurl=ae,e.zutil=t,Object.defineProperty(e,"__esModule",{value:!0})});
